<form (ngSubmit)="onSubmit()" #businessCardForm="ngForm" class="container mt-4 p-4 border rounded shadow-lg bg-light">
  <h2 class="mb-4 text-center text-primary">Add Your Business Card</h2>

  <div class="row mb-3">
      <div class="col-md-4">
          <label for="name" class="form-label">Name:</label>
          <input type="text" id="name" class="form-control" [(ngModel)]="newCard.name" name="name" required />
          <div class="invalid-feedback" *ngIf="businessCardForm.controls['name']?.invalid && businessCardForm.controls['name']?.touched">
              Name is required.
          </div>
      </div>

      <div class="col-md-4">
          <label for="gender" class="form-label">Gender:</label>
          <select id="gender" class="form-select" [(ngModel)]="newCard.gender" name="gender" required>
              <option value="">Select Gender</option>
              <option value="Male">Male</option>
              <option value="Female">Female</option>
          </select>
          <div class="invalid-feedback" *ngIf="businessCardForm.controls['gender']?.invalid && businessCardForm.controls['gender']?.touched">
              Gender is required.
          </div>
      </div>

      <div class="col-md-4">
          <label for="dob" class="form-label">Date of Birth:</label>
          <input type="date" id="dob" class="form-control" [(ngModel)]="newCard.dateOfBirth" name="dob" required />
      </div>
  </div>

  <div class="row mb-3">
      <div class="col-md-4">
          <label for="email" class="form-label">Email:</label>
          <input type="email" id="email" class="form-control" [(ngModel)]="newCard.email" name="email" required />
          <div class="invalid-feedback" *ngIf="businessCardForm.controls['email']?.invalid && businessCardForm.controls['email']?.touched">
              Please enter a valid email address.
          </div>
      </div>

      <div class="col-md-4">
          <label for="phone" class="form-label">Phone:</label>
          <input type="tel" id="phone" class="form-control" [(ngModel)]="newCard.phone" name="phone" required />
          <div class="invalid-feedback" *ngIf="businessCardForm.controls['phone']?.invalid && businessCardForm.controls['phone']?.touched">
              Phone number is required.
          </div>
      </div>

      <div class="col-md-4">
          <label for="address" class="form-label">Address:</label>
          <textarea id="address" class="form-control" [(ngModel)]="newCard.address" name="address" rows="3" required></textarea>
      </div>
  </div>

  <div class="mb-3">
    <label for="photo" class="form-label">Upload Photo:</label>
    <input type="file" id="photo" class="form-control" (change)="onFileChange($event)" accept="image/*" />
    <small class="form-text text-muted">Please upload a photo.</small>

    <!-- Preview the uploaded image -->
    <div *ngIf="newCard.photo">
        <img [src]="'data:image/png;base64,' + newCard.photo" alt="Photo Preview" style="max-width: 100%; margin-top: 10px;" />
    </div>
</div>
<div class="mb-3" (dragover)="onDragOver($event)" (drop)="onFileDrop($event)">
  <label for="fileInput" class="form-label">Upload XML/CSV/QR Code:</label>
  <input type="file" id="fileInput" class="form-control" (change)="onImportFileChange($event)" accept=".xml,.csv,image/*" />
  <small class="form-text text-muted">Drag and drop or select a file (XML, CSV, or QR code).</small>
</div>

<div *ngIf="fileData.length > 0" class="mb-3">
  <label for="filePreview" class="form-label">File Preview:</label>
  <pre id="filePreview" style="max-height: 200px; overflow: auto; background-color: #f8f9fa; padding: 10px; border: 1px solid #ddd;">
    {{ fileData | json }} <!-- Using json pipe for better formatting -->
  </pre>
</div>

<!-- Preview Imported Business Cards -->
<div *ngIf="importedData.length > 0" class="mb-3">
  <h3>Preview Imported Data</h3>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Name</th>
        <th>Gender</th>
        <th>Date of Birth</th>
        <th>Email</th>
        <th>Phone</th>
        <th>Address</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let card of importedData">
        <td>{{ card.name }}</td>
        <td>{{ card.gender }}</td>
        <td>{{ card.dateOfBirth | date:'yyyy-MM-dd' }}</td> <!-- Format date -->
        <td>{{ card.email }}</td>
        <td>{{ card.phone }}</td>
        <td>{{ card.address }}</td>
      </tr>
    </tbody>
  </table>
</div>



  <button type="submit" class="btn btn-primary">Create Business Card</button>

</form>
